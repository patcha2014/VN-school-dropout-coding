* collect sex, age, and education from V[H]LSS data (1993, 1998, 2002, 2004, 2006, 2008)*   by individual and then create household aggregates// -------------- 2012 --------------- //local vhlss12 "~/documents/econ/data/micro/vnm/vhlss/2012/data/hhold"cd `vhlss12'use Muc1a, clear

merge 1:1 tinh huyen xa diaban hoso matv using muc2a1 //there is no m123a.dta in 2012 VHLSS
drop _merge
gen byte male = 2-m1ac2gen byte hh_head = (m1ac3==1)rename m1ac5 agerename m2ac1 ed_yrs // education up to 12 years (high school)
destring ed_yrs, replacelabel values ed_yrs  // delete existing values labelsreplace ed_yrs = 14 if m2ac2a==8 // Junior Collegereplace ed_yrs = 16 if m2ac2a==9 // Bachelors Degreereplace ed_yrs = 18 if m2ac2a==10 // Masters Degreereplace ed_yrs = 22 if m2ac2a==11 // Doctoral Degreegen byte inschool = (m2ac5<3)gen byte child = (age<14)gen byte teen = (age>=14) & inschool & (age<25) & (age!=.)gen byte adult = (!child & !teen)gen byte adultm = adult & malegen byte adultf = adult & !malegen int head_age = age if hh_headgen int adult_age = age if adultgen byte head_ed = ed_yrs if hh_head // education of household headgen byte adult_ed = ed_yrs if adult //education of adultsgen byte adultm_ed = ed_yrs if adultm //education of adult malesgen byte adultf_ed = ed_yrs if adultf //education of adult femalescollapse (sum) child teen adultm adultf head_age head_ed ///	(mean) adult_age adult_ed adultm_ed adultf_ed, ///	by(tinh huyen xa diaban hoso)label var child "No. of children (<14 yrs) in HH"label var teen "No. of people (14<=age<25) inschool in HH"label var adultm "No. of adult males (!teen)"label var adultf "No. of adult females (!teen)"label var head_age "Age of head of household"label var head_ed "Education in yrs of head of household"label var adult_age "Avg age of adults in HH"label var adult_ed "Avg yrs of education of adults"qui for any child teen adultm adultf head_age head_ed ///	adult_age adult_ed  adultm_ed adultf_ed: ///	rename X X12  // add year # to variablescompresssave sexaged12, replace
// -------------- 2010 --------------- //local vhlss10 "~/documents/econ/data/micro/vnm/vhlss/2010/data/hhold"cd `vhlss10'use muc1a, clear

merge 1:1 tinh huyen xa diaban hoso matv using muc2a1 //there is no muc123a.dta in 2010 VHLSS
drop _merge
gen byte male = 2-m1ac2gen byte hh_head = (m1ac3==1)rename m1ac5 agerename m2ac1 ed_yrs // education up to 12 years (high school)
destring ed_yrs, replace ///because value of ed_yrs is stringlabel values ed_yrs  // delete existing values labelsreplace ed_yrs = 14 if m2ac2a==8 // Junior Collegereplace ed_yrs = 16 if m2ac2a==9 // Bachelors Degreereplace ed_yrs = 18 if m2ac2a==10 // Masters Degreereplace ed_yrs = 22 if m2ac2a==11 // Doctoral Degreegen byte inschool = (m2ac5<3)gen byte child = (age<14)gen byte teen = (age>=14) & inschool & (age<25) & (age!=.)gen byte adult = (!child & !teen)gen byte adultm = adult & malegen byte adultf = adult & !malegen int head_age = age if hh_headgen int adult_age = age if adultgen byte head_ed = ed_yrs if hh_head // education of household headgen byte adult_ed = ed_yrs if adult //education of adultsgen byte adultm_ed = ed_yrs if adultm //education of adult malesgen byte adultf_ed = ed_yrs if adultf //education of adult femalescollapse (sum) child teen adultm adultf head_age head_ed ///	(mean) adult_age adult_ed adultm_ed adultf_ed, ///	by(tinh huyen xa diaban hoso)label var child "No. of children (<14 yrs) in HH"label var teen "No. of people (14<=age<25) inschool in HH"label var adultm "No. of adult males (!teen)"label var adultf "No. of adult females (!teen)"label var head_age "Age of head of household"label var head_ed "Education in yrs of head of household"label var adult_age "Avg age of adults in HH"label var adult_ed "Avg yrs of education of adults"qui for any child teen adultm adultf head_age head_ed ///	adult_age adult_ed  adultm_ed adultf_ed: ///	rename X X10  // add year # to variablescompresssave sexaged10, replace
// -------------- 2008 --------------- //local vhlss08 "~/documents/econ/data/micro/vnm/vhlss/2008/data/hhold"use `vhlss08'/muc123a, cleargen byte male = 2-m1ac2gen byte hh_head = (m1ac3==1)rename m1ac5 agerename m2ac1 ed_yrs // education up to 12 years (high school)label values ed_yrs  // delete existing values labelsreplace ed_yrs = 14 if m2ac3a==8 // Junior Collegereplace ed_yrs = 16 if m2ac3a==9 // Bachelors Degreereplace ed_yrs = 18 if m2ac3a==10 // Masters Degreereplace ed_yrs = 22 if m2ac3a==11 // Doctoral Degreegen byte inschool = (m2ac5<3)gen byte child = (age<14)gen byte teen = (age>=14) & inschool & (age<25) & (age!=.)gen byte adult = (!child & !teen)gen byte adultm = adult & malegen byte adultf = adult & !malegen int head_age = age if hh_headgen int adult_age = age if adultgen byte head_ed = ed_yrs if hh_head // education of household headgen byte adult_ed = ed_yrs if adult //education of adultsgen byte adultm_ed = ed_yrs if adultm //education of adult malesgen byte adultf_ed = ed_yrs if adultf //education of adult femalescollapse (sum) child teen adultm adultf head_age head_ed ///	(mean) adult_age adult_ed adultm_ed adultf_ed, ///	by(tinh huyen xa diaban hoso)label var child "No. of children (<14 yrs) in HH"label var teen "No. of people (14<=age<25) inschool in HH"label var adultm "No. of adult males (!teen)"label var adultf "No. of adult females (!teen)"label var head_age "Age of head of household"label var head_ed "Education in yrs of head of household"label var adult_age "Avg age of adults in HH"label var adult_ed "Avg yrs of education of adults"qui for any child teen adultm adultf head_age head_ed ///	adult_age adult_ed  adultm_ed adultf_ed: ///	rename X X08  // add year # to variablescompresssave sexaged08, replace// -------------- 2006 --------------- //local vhlss06 "~/documents/econ/data/micro/vnm/vhlss/2006/data/hhold"use `vhlss06'/muc1a, cleargen byte male = 2-m1ac2gen byte hh_head = (m1ac3==1)rename m1ac5 agekeep tinh huyen xa diaban hoso matv male age hh_headsort tinh huyen xa diaban hoso matvsave sexaged06, replaceuse `vhlss06'/muc2a, clearrename m2ac1 ed_yrs // education up to 12 years (high school)label values ed_yrs  // delete existing values labelsreplace ed_yrs = 14 if m2ac3a==7 // Junior Collegereplace ed_yrs = 16 if m2ac3a==8 // Bachelors Degreereplace ed_yrs = 18 if m2ac3a==9 // Masters Degreereplace ed_yrs = 22 if m2ac3a==10 // Doctoral Degreegen byte inschool = m2ac4<3keep tinh huyen xa diaban hoso matv ed_yrs inschoolsort tinh huyen xa diaban hoso matvmerge tinh huyen xa diaban hoso matv using sexaged06tab _mdrop _msort tinh huyen xa diaban hoso matvgen byte child = (age<14)gen byte teen = (age>=14) & inschool & (age<25) & (age!=.)gen byte adult = (!child & !teen)gen byte adultm = adult & malegen byte adultf = adult & !malegen int head_age = age if hh_headgen int adult_age = age if adultgen byte head_ed = ed_yrs if hh_head // education of household headgen byte adult_ed = ed_yrs if adult //education of adultsgen byte adultm_ed = ed_yrs if adultm //education of adult malesgen byte adultf_ed = ed_yrs if adultf //education of adult femalescollapse (sum) child teen adultm adultf head_age head_ed ///	(mean) adult_age adult_ed adultm_ed adultf_ed, ///	by(tinh huyen xa diaban hoso)label var child "No. of children (<14 yrs) in HH"label var teen "No. of people (14<=age<25) inschool in HH"label var adultm "No. of adult males (!teen)"label var adultf "No. of adult females (!teen)"label var head_age "Age of head of household"label var head_ed "Education in yrs of head of household"label var adult_age "Avg age of adults in HH"label var adult_ed "Avg yrs of education of adults"qui for any child teen adultm adultf head_age head_ed ///	adult_age adult_ed  adultm_ed adultf_ed: ///	rename X X06  // add year # to variablescompresssave sexaged06, replace// -------------- 2004 --------------- //local vhlss04 "~/documents/econ/data/micro/vnm/vhlss/2004/data/hhold"use `vhlss04'/m1_2_3a, clearsort tinh huyen xa diaban hoso matvgen byte male = 2-m1ac2gen byte hh_head = (m1ac3==1)rename m1ac5 agerename m2c1 ed_yrs // education up to 12 years (high school)label values ed_yrs  // delete existing values labelsreplace ed_yrs = 14 if m2c3a==7 // Junior Collegereplace ed_yrs = 16 if m2c3a==8 // Bachelors Degreereplace ed_yrs = 18 if m2c3a==9 // Masters Degreereplace ed_yrs = 22 if m2c3a==10 // Doctoral Degreegen byte inschool = (m2c4<3)gen byte child = (age<14)gen byte teen = (age>=14) & inschool & (age<25) & (age!=.)gen byte adult = (!child & !teen)gen byte adultm = adult & malegen byte adultf = adult & !malegen int head_age = age if hh_headgen int adult_age = age if adultgen byte head_ed = ed_yrs if hh_head // education of household headgen byte adult_ed = ed_yrs if adult //education of adultsgen byte adultm_ed = ed_yrs if adultm //education of adult malesgen byte adultf_ed = ed_yrs if adultf //education of adult femalescollapse (sum) child teen adultm adultf head_age head_ed ///	(mean) adult_age adult_ed adultm_ed adultf_ed, ///	by(tinh huyen xa diaban hoso)label var child "No. of children (<14 yrs) in HH"label var teen "No. of people (14<=age<25) inschool in HH"label var adultm "No. of adult males (!teen)"label var adultf "No. of adult females (!teen)"label var head_age "Age of head of household"label var head_ed "Education in yrs of head of household"label var adult_age "Avg age of adults in HH"label var adult_ed "Avg yrs of education of adults"qui for any child teen adultm adultf head_age head_ed ///	adult_age adult_ed  adultm_ed adultf_ed: ///	rename X X04  // add year # to variablescompresssave sexaged04, replace// -------------- 2002 --------------- //local vhlss02 "~/documents/econ/data/micro/vnm/vhlss/2002/data/hhold"use `vhlss02'/muc1, cleargen byte male = 2-m1c2gen byte hh_head = (m1c3==1)rename m1c5 agekeep xa hoso matv male age hh_headsort xa hoso matvsave sexaged02, replaceuse `vhlss02'/muc2, clearrename m2c1 ed_yrs // education up to 12 years (high school)label values ed_yrs  // delete existing values labelsreplace ed_yrs = 14 if m2c3==6 // Junior Collegereplace ed_yrs = 16 if m2c3==7 // Bachelors Degreereplace ed_yrs = 18 if m2c3==8 // Masters Degreereplace ed_yrs = 22 if m2c3==9 // Doctoral Degreegen byte inschool = 1-m2c4keep xa hoso matv ed_yrs inschoolsort xa hoso matvmerge xa hoso matv using sexaged02tab _mdrop _mgen byte child = (age<14)gen byte teen = (age>=14) & inschool & (age<25) & (age!=.)gen byte adult = (!child & !teen)gen byte adultm = adult & malegen byte adultf = adult & !malegen int head_age = age if hh_headgen int adult_age = age if adultgen byte head_ed = ed_yrs if hh_head // education of household headgen byte adult_ed = ed_yrs if adult //education of adultsgen byte adultm_ed = ed_yrs if adultm //education of adult malesgen byte adultf_ed = ed_yrs if adultf //education of adult femalescollapse (sum) child teen adultm adultf head_age head_ed ///	(mean) adult_age adult_ed adultm_ed adultf_ed, ///	by(xa hoso)label var child "No. of children (<14 yrs) in HH"label var teen "No. of people (14<=age<25) inschool in HH"label var adultm "No. of adult males (!teen)"label var adultf "No. of adult females (!teen)"label var head_age "Age of head of household"label var head_ed "Education in yrs of head of household"label var adult_age "Avg age of adults in HH"label var adult_ed "Avg yrs of education of adults"qui for any child teen adultm adultf head_age head_ed ///	adult_age adult_ed  adultm_ed adultf_ed: ///	rename X X02  // add year # to variablescompresssave sexaged02, replace// -------------- 1998 --------------- //local vhlss98 "~/documents/econ/data/micro/vnm/vhlss/1998/data/hhold"use `vhlss98'/scr01a2, cleargen byte male = 2-s1aq02rename s1aq06y agegen byte hh_head = (s1aq03==1)drop if s1aq11==2  // not household memberskeep househol idcode male age hh_headsort househol idcodesave sexaged98, replaceuse educ98, clearrename educyr ed_yrsreplace ed_yrs = 12 if ed_yrs>12 // 1993,1998 VLSS has ed_yrs>12replace ed_yrs = 14 if comped==8 // Junior Collegereplace ed_yrs = 16 if comped==9 // Bachelors Degreereplace ed_yrs = 18 if comped==10 // Masters Degreereplace ed_yrs = 22 if comped>11 // Doctoral or sub-doctoral Degreekeep househol idcode ed_yrs inschoolsort househol idcodemerge househol idcode using sexaged98tab _mdrop _mgen byte child = (age<14)gen byte teen = (age>=14) & inschool & (age<25) & (age!=.)gen byte adult = (!child & !teen)gen byte adultm = adult & malegen byte adultf = adult & !malegen int head_age = age if hh_headgen int adult_age = age if adultgen byte head_ed = ed_yrs if hh_head // education of household headgen byte adult_ed = ed_yrs if adult //education of adultsgen byte adultm_ed = ed_yrs if adultm //education of adult malesgen byte adultf_ed = ed_yrs if adultf //education of adult femalescollapse (sum) child teen adultm adultf head_age head_ed ///	(mean) adult_age adult_ed adultm_ed adultf_ed, ///	by(househol)label var child "No. of children (<14 yrs) in HH"label var teen "No. of people (14<=age<25) inschool in HH"label var adultm "No. of adult males (!teen)"label var adultf "No. of adult females (!teen)"label var head_age "Age of head of household"label var head_ed "Education in yrs of head of household"label var adult_age "Avg age of adults in HH"label var adult_ed "Avg yrs of education of adults"qui for any child teen adultm adultf head_age head_ed ///	adult_age adult_ed  adultm_ed adultf_ed: ///	rename X X98  // add year # to variablescompresssave sexaged98, replace// -------------- 1993 --------------- //local vhlss93 "~/documents/econ/data/micro/vnm/vhlss/1993/data/hhold"use `vhlss93'/sect01a, cleargen byte male = 2-sexrename agey agegen byte hh_head = (rel==1)drop if memb==2  // not household memberskeep hid pid male age hh_headsort hid pidsave sexaged93, replaceuse educ93, clearrename educyr ed_yrsreplace ed_yrs = 12 if ed_yrs>12 // 1993,1998 VLSS has ed_yrs>12replace ed_yrs = 14 if comped==8 // Junior Collegereplace ed_yrs = 16 if comped==9 // Bachelors Degreereplace ed_yrs = 18 if comped==10 // Masters Degreereplace ed_yrs = 22 if comped>11 // Doctoral or sub-doctoral Degreekeep hholdno idc ed_yrs inschoolsort hholdno idcren hholdno hidren idc pidmerge hid pid using sexaged93tab _mdrop _mgen byte child = (age<14)gen byte teen = (age>=14) & inschool & (age<25) & (age!=.)gen byte adult = (!child & !teen)gen byte adultm = adult & malegen byte adultf = adult & !malegen int head_age = age if hh_headgen int adult_age = age if adultgen byte head_ed = ed_yrs if hh_head // education of household headgen byte adult_ed = ed_yrs if adult //education of adultsgen byte adultm_ed = ed_yrs if adultm //education of adult malesgen byte adultf_ed = ed_yrs if adultf //education of adult femalescollapse (sum) child teen adultm adultf head_age head_ed ///	(mean) adult_age adult_ed adultm_ed adultf_ed, ///	by(hid)label var child "No. of children (<14 yrs) in HH"label var teen "No. of people (14<=age<25) inschool in HH"label var adultm "No. of adult males (!teen)"label var adultf "No. of adult females (!teen)"label var head_age "Age of head of household"label var head_ed "Education in yrs of head of household"label var adult_age "Avg age of adults in HH"label var adult_ed "Avg yrs of education of adults"qui for any child teen adultm adultf head_age head_ed ///	adult_age adult_ed  adultm_ed adultf_ed: ///	rename X X93  // add year # to variablescompresssave sexaged93, replace